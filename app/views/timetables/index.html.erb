<!-- app/views/timetables/index.html.erb -->

<h1>Your Timetables</h1>

<%= link_to 'New Timetable', new_timetable_path, class: 'btn btn-primary mb-3' %>

<table class="table table-striped table-bordered">
  <thead class="thead-dark">
    <tr>
      <th>Type</th>
      <th>Start Date</th>
      <th>End Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @timetables.each do |timetable| %>
      <tr>
        <td>
          <% if timetable.start_date && timetable.end_date %>
            <%= (timetable.end_date - timetable.start_date).to_i >= 27 ? 'Monthly' : 'Weekly' %>
          <% else %>
            Not specified
          <% end %>
        </td>
        <td><%= timetable.start_date || 'Not specified' %></td>
        <td><%= timetable.end_date || 'Not specified' %></td>
        <td>
          <%= link_to 'Show', timetable_path(timetable), class: 'btn btn-info btn-sm' %>
          <%= link_to 'Edit', edit_timetable_path(timetable), class: 'btn btn-warning btn-sm' %>
          <%= link_to 'Destroy', timetable_path(timetable), method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
